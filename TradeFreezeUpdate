-- Freeze Trade GUI: ShinOnTop Edition (Pink Style + Countdown Visual)
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Remove previous UI if it exists
if PlayerGui:FindFirstChild("FreezeTradeUI") then
    PlayerGui.FreezeTradeUI:Destroy()
end

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui", PlayerGui)
ScreenGui.Name = "FreezeTradeUI"
ScreenGui.ResetOnSpawn = false

-- Main Frame
local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 400, 0, 300)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
MainFrame.Active = true
MainFrame.Draggable = true
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)

-- Title Bar
local Title = Instance.new("TextLabel", MainFrame)
Title.Text = "üå¥ ShinOnTop Trade Freezer üå¥"
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Position = UDim2.new(0, 0, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(255, 105, 180)
Title.TextColor3 = Color3.new(1, 1, 1)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Center

-- Minimize Button
local MinButton = Instance.new("TextButton", MainFrame)
MinButton.Text = "X"
MinButton.Size = UDim2.new(0, 30, 0, 30)
MinButton.Position = UDim2.new(1, -35, 0, 5)
MinButton.BackgroundColor3 = Color3.fromRGB(255, 60, 100)
MinButton.TextColor3 = Color3.new(1, 1, 1)
MinButton.Font = Enum.Font.GothamBold
MinButton.TextSize = 16
Instance.new("UICorner", MinButton).CornerRadius = UDim.new(0, 6)

-- Search Label
local SearchLabel = Instance.new("TextLabel", MainFrame)
SearchLabel.Text = "Find Player to Freeze Trade"
SearchLabel.Position = UDim2.new(0, 0, 0, 50)
SearchLabel.Size = UDim2.new(1, 0, 0, 25)
SearchLabel.BackgroundTransparency = 1
SearchLabel.TextColor3 = Color3.fromRGB(255, 0, 127)
SearchLabel.Font = Enum.Font.GothamBold
SearchLabel.TextSize = 16
SearchLabel.TextXAlignment = Enum.TextXAlignment.Center

-- Username Box
local UsernameBox = Instance.new("TextBox", MainFrame)
UsernameBox.PlaceholderText = "Enter username to start Freeze Trade"
UsernameBox.Position = UDim2.new(0.05, 0, 0, 85)
UsernameBox.Size = UDim2.new(0.65, 0, 0, 35)
UsernameBox.Font = Enum.Font.Gotham
UsernameBox.TextSize = 14
UsernameBox.TextColor3 = Color3.new(0, 0, 0)
UsernameBox.BackgroundColor3 = Color3.fromRGB(255, 230, 240)
Instance.new("UICorner", UsernameBox).CornerRadius = UDim.new(0, 6)

-- Search Button
local SearchButton = Instance.new("TextButton", MainFrame)
SearchButton.Text = "Search"
SearchButton.Position = UDim2.new(0.72, 0, 0, 85)
SearchButton.Size = UDim2.new(0.23, 0, 0, 35)
SearchButton.BackgroundColor3 = Color3.fromRGB(255, 105, 180)
SearchButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SearchButton.Font = Enum.Font.GothamBold
SearchButton.TextSize = 14
Instance.new("UICorner", SearchButton).CornerRadius = UDim.new(0, 6)

-- Player Found Display
local FoundLabel = Instance.new("TextLabel", MainFrame)
FoundLabel.Position = UDim2.new(0.05, 0, 0, 135)
FoundLabel.Size = UDim2.new(0.9, 0, 0, 30)
FoundLabel.Text = ""
FoundLabel.BackgroundColor3 = Color3.fromRGB(255, 230, 240)
FoundLabel.TextColor3 = Color3.fromRGB(120, 0, 60)
FoundLabel.Font = Enum.Font.GothamBold
FoundLabel.TextSize = 16
FoundLabel.Visible = false
Instance.new("UICorner", FoundLabel).CornerRadius = UDim.new(0, 6)

-- Avatar Image
local AvatarImage = Instance.new("ImageLabel", MainFrame)
AvatarImage.Position = UDim2.new(0.85, -40, 0, 140)
AvatarImage.Size = UDim2.new(0, 25, 0, 25)
AvatarImage.BackgroundTransparency = 1
AvatarImage.Visible = false
AvatarImage.ScaleType = Enum.ScaleType.Fit

-- Freeze Button
local FreezeButton = Instance.new("TextButton", MainFrame)
FreezeButton.Text = "FREEZE TRADE"
FreezeButton.Position = UDim2.new(0.05, 0, 0, 185)
FreezeButton.Size = UDim2.new(0.9, 0, 0, 45)
FreezeButton.BackgroundColor3 = Color3.fromRGB(255, 105, 180)
FreezeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FreezeButton.Font = Enum.Font.GothamBold
FreezeButton.TextSize = 16
Instance.new("UICorner", FreezeButton).CornerRadius = UDim.new(0, 8)

-- Trade Frozen Status Visual
local StatusLabel = Instance.new("TextLabel", MainFrame)
StatusLabel.Size = UDim2.new(0.9, 0, 0, 25)
StatusLabel.Position = UDim2.new(0.05, 0, 0, 240)
StatusLabel.BackgroundColor3 = Color3.fromRGB(255, 230, 240)
StatusLabel.TextColor3 = Color3.fromRGB(255, 0, 127)
StatusLabel.Font = Enum.Font.GothamBold
StatusLabel.TextSize = 14
StatusLabel.Text = "‚ö†Ô∏è Trade still frozen ‚Äî Countdown stuck at 0"
StatusLabel.Visible = false
Instance.new("UICorner", StatusLabel).CornerRadius = UDim.new(0, 6)

-- Watermark inside MainFrame
local Watermark = Instance.new("TextLabel", MainFrame)
Watermark.Text = "Made By: ShinOnTop"
Watermark.Size = UDim2.new(1, -20, 0, 20)
Watermark.Position = UDim2.new(0, 10, 1, -25)
Watermark.BackgroundTransparency = 1
Watermark.TextColor3 = Color3.fromRGB(150, 150, 150)
Watermark.TextTransparency = 0.3
Watermark.Font = Enum.Font.Gotham
Watermark.TextSize = 13
Watermark.TextXAlignment = Enum.TextXAlignment.Right

-- Logic
local targetPlayer = nil

SearchButton.MouseButton1Click:Connect(function()
    local username = UsernameBox.Text
    local found = Players:FindFirstChild(username)
    if found then
        targetPlayer = found
        FoundLabel.Text = found.Name
        FoundLabel.Visible = true
        AvatarImage.Image = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. found.UserId .. "&width=150&height=150&format=png"
        AvatarImage.Visible = true
    else
        FoundLabel.Text = "Player not found"
        FoundLabel.Visible = true
        AvatarImage.Visible = false
        targetPlayer = nil
    end
end)

-- Simulate visual when trade stays frozen
local function OnPetRemovedWhileFrozen()
    if StatusLabel then
        StatusLabel.Visible = true
        task.delay(3, function()
            StatusLabel.Visible = false
        end)
    end
end

FreezeButton.MouseButton1Click:Connect(function()
    if targetPlayer then
        warn("Attempted to freeze trade with: " .. targetPlayer.Name)
        FreezeButton.Text = "TRADE FROZEN!"
        FreezeButton.BackgroundColor3 = Color3.fromRGB(255, 70, 150)
        OnPetRemovedWhileFrozen()
    else
        FreezeButton.Text = "No Player Selected"
        FreezeButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
    end
    task.delay(2, function()
        FreezeButton.Text = "FREEZE TRADE"
        FreezeButton.BackgroundColor3 = Color3.fromRGB(255, 105, 180)
    end)
end)

-- Minimize logic
local minimized = false
MinButton.MouseButton1Click:Connect(function()
    minimized = not minimized
    for _, child in ipairs(MainFrame:GetChildren()) do
        if child ~= MinButton and child ~= Title and child:IsA("GuiObject") then
            child.Visible = not minimized
        end
    end
    MinButton.Text = minimized and "+" or "X"
end)
